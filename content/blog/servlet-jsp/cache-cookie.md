---
title: 'Cache와 Cookie'
date: 2021-1-24
category: 'servlet&jsp'
draft: false
---



## 학원에서 배운것을 기록합니다.


### Cache

ETag : 해당 컨텐츠가 수정된 이력이 있는 지 검사할 수 있는 식별자  
만약 컨텐츠가 1바이트라도 수정되게 되면 ETag값이 변경된다.  
또한 컨텐츠의 내용이 수정되지 않더라도, 최종수정일을 변경하면 ETag값이 변경된다.  


Cache-Control 헤더 : 캐시정책을 지정  
no-store : 캐시를 저장하지 않음.  

no-cache : 매번 서버에서 해당 자원의 Etag를 확인한다.  
만약 서버자원의 Etag와 캐시 저장소의 Etag가 다르면 자원을 요청하고 같으면 캐시저장소의 자원을 사용한다.  

max-age : 캐시 수명을 지정한다.  
지정한 초가 지나기 전에는 서버에 Etag도 확인하지 않는다.  
캐시 수명이 만료되면 no-cache 와 동일하다.  



### Cookie

Cookie는 서버가 클라이언트에게 응답할 때 헤더에 저장해두는 작은 데이터 조각이다.  
클라이언트는 해당 Cookie를 요청이 발생할 때 마다 요청헤더에 담아서 서버에게 전송한다.  
<br>


쿠키를 사용하는 이유 :  
Http 통신은 Stateless 하기 때문. 즉, 통신이 끝나면 서버는 클라이언트의 상태를 알 수 없다.  
따라서 예전에 방문한 클라이언트 인지, 서버에 의해 인증된 사용자인지 등의 내용도 알 수가 없다.  
<br>


Stateless 를 극복하기 위해 나온 게 Cookie 이다.  
서버가 클라이언트의 헤더에 담아 보내는 Cookie에 기억하고자 하는 내용을  
저장해서 클라이언트에게 응답할 때 쿠키에 담아 보내면 클라이언트는 통신이 끝나고 (서버가 클라이언트를 잊음)  
다시 새롭게 요청을 할 때 해당 쿠키를 서버에게 담아 보냄으로 서버는 잊었던 기억을 되찾을 수 있다.  

ex) 마지막 접속시간, 회원 정보로 접근하기 위한 키값, 비로그인 상태에서 추가한 장바구니 정보 등  
<br>


set-cookie :  
응답 헤더에 쿠키를 추가,  key=value 형태  
같은 키에 값을 담으면 덮어써진다.  
Max-Age : 쿠키의 수명을 초단위 지정  
ex) max-age=20 : 응답 이후 20초 동안만 쿠키가 살아있다.  
기본값 : session (브라우저가 종료되면 쿠키도 같이 삭제)  
<br>


Path :  
어떤 URL로 클라이언트가 요청을 할 때 해당 쿠키를 헤더에 담아서 보내야 할 지 지정  
ex) path=/servlet/cache : 브라우저가 /servlet/cache로 요청할 때 헤더에 cookie를 담아서 보낸다.  






